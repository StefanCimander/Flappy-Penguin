<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Flappy Penguin</title>
    <link rel="stylesheet" href="css/style.css">

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/easeljs-0.8.2.min.js"></script>

    <script src="js/config.js"></script>
    <script src="js/assets.js"></script>

    <script src="js/Player.js"></script>
    <script src="js/HUD.js"></script>
    <script src="js/PauseScreen.js"></script>
    <script src="js/Scene.js"></script>
    <script src="js/Game.js"></script>
    <script src="js/collision.js"></script>
    

    <!-- ReSharper disable once Html.EventNotResolved createjs.Ticker.addEventListener('tick',..)-->
    <script>
        window.addEventListener('load', function (e) {
            var canvas = document.getElementById('stage');
            canvas.width = document.body.getBoundingClientRect().width;
            canvas.height = document.body.getBoundingClientRect().height * 0.8;

            var game = new Game();
            
            document.addEventListener('keydown', game.getKeyboardHandler());

            createjs.Ticker.setFPS(FPS);
            createjs.Ticker.setInterval(1000 / FPS);
            createjs.Ticker.addEventListener('tick', function () { game.stage.update(); }); //need to declare a new function to scope 'this' reference
            
            /*var socket = io('127.0.0.1:3000');
            window.socket = socket;
            socket.on('arduino-data', function(data) {
                console.log("Arduino:", data);
                if (data.breath) {
                    console.log("yay");
                    game.breathe();
                }
            });*/

            window.setInterval( game.gameUpdate, 1000 / UPDATE_RATE);
        });
    </script>
</head>
<body>
    <canvas id="stage" width="500" height="512"></canvas>
</body>
</html>
